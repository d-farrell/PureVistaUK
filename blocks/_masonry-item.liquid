{%- liquid
  assign item_image = block.settings.image
  assign item_title = block.settings.title
  assign item_height = block.settings.height | default: 300
-%}

{%- if item_image != blank or item_title != blank -%}
  <div class="masonry-grid__item" {{ block.shopify_attributes }}>
    <div class="masonry-grid__image-wrapper" style="height: {{ item_height }}px;">
      {%- if item_image != blank -%}
        <img
          src="{{ item_image | image_url: width: 800 }}"
          alt="{{ item_image.alt | default: item_title | escape }}"
          loading="lazy"
          width="{{ item_image.width }}"
          height="{{ item_image.height }}"
          class="masonry-grid__image"
        >
      {%- else -%}
        <div class="masonry-grid__image-placeholder">
          {{ 'image' | placeholder_svg_tag }}
        </div>
      {%- endif -%}
    </div>
    {%- if item_title != blank -%}
      <h3 class="masonry-grid__title">{{ item_title }}</h3>
    {%- endif -%}
  </div>
{%- endif -%}

{% schema %}
{
  "name": "Masonry item",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "range",
      "id": "height",
      "label": "Height",
      "min": 150,
      "max": 600,
      "step": 10,
      "unit": "px",
      "default": 300
    }
  ],
  "presets": [
    {
      "name": "Masonry Item",
      "settings": {
        "title": "Masonry Item"
      }
    }
  ]
}
{% endschema %}
